<html
    xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    data-namespace-typo3-fluid="true"
>
<f:layout name="Widget/Widget" />
<f:section name="main">

    <div class="widget-table-wrapper">
        <table class="widget-table">
            <thead>
                <tr>
                    <th width="70%"></th>
                    <th width="20%"><f:translate key="LLL:EXT:widget_mirror/Resources/Private/Language/backend.xlf:widgets.duplicatefiles.control" /></th>
                    <th width="10%"><f:translate key="LLL:EXT:widget_mirror/Resources/Private/Language/backend.xlf:widgets.duplicatefiles.referenceCount" /></th>
                </tr>
            </thead>
            <f:for each="{duplicates}" as="duplicate">
                <tr>
                    <td colspan="3">
                        <f:format.raw>
                            <f:translate key="LLL:EXT:widget_mirror/Resources/Private/Language/backend.xlf:widgets.duplicateFiles.text" arguments="{0: duplicate.sha1, 1: duplicate.counting}" /><br />
                        </f:format.raw>
                        <small>
                            <table style="width: 100%; margin:0; padding:0;">
                                <f:for each="{duplicate.files}" as="duplicate">
                                    <tr style="background-color: initial;">
                                        <td width="70%" style="word-break: break-word;">
                                            {duplicate.file.identifier}<br />
                                            <f:media file="{duplicate.file}" width="100c" height="50c"/>
                                        </td>
                                        <td width="20%">
                                            <div class="btn-group position-static">
                                                <f:link.file
                                                    file="{duplicate.file}"
                                                    target="_blank"
                                                    title="{f:translate(key: 'LLL:EXT:widget_mirror/Resources/Private/Language/backend.xlf:widgets.duplicatefiles.openOriginalFile')}"
                                                    class="btn btn-default btn-sm"
                                                >
                                                    <core:icon identifier="actions-eye" />
                                                </f:link.file>
                                                <f:be.link
                                                    route="show_item"
                                                    parameters="{table: '_FILE', uid: '{duplicate.file.storage.storageRecord.uid}:{duplicate.file.identifier}'}"
                                                    target="_blank"
                                                    title="{f:translate(key: 'LLL:EXT:core/Resources/Private/Language/locallang_mod_web_list.xlf:showInfo')}"
                                                    class="btn btn-default btn-sm"
                                                >
                                                    <core:icon identifier="actions-document-info" />
                                                </f:be.link>

                                                <f:be.link
                                                    route="file_FilelistList"
                                                    parameters="{id: duplicate.parentFolder}"
                                                    title="{f:translate(key: 'LLL:EXT:widget_mirror/Resources/Private/Language/backend.xlf:widgets.duplicatefiles.openFolder')}"
                                                    class="btn btn-default btn-sm"
                                                >
                                                    <core:icon identifier="apps-pagetree-folder-contains" />
                                                </f:be.link>
                                            </div>
                                        </td>
                                        <td width="10%">
                                            {duplicate.referenceCount}
                                        </td>
                                    </tr>
                                </f:for>
                            </table>
                        </small>
                    </td>
                </tr>
            </f:for>
        </table>
    </div>

</f:section>
<f:section name="footer">

</f:section>
</html>
